# 🐾 Veterinary Audio Record Processor

A Streamlit application that processes audio dictations from veterinarians and automatically extracts patient information, dosages, and notes into a structured database.

## ✨ Features

- **Audio Processing**: Upload and process multiple audio files (MP3, WAV, M4A, OGG, FLAC, OPUS)
- **AI-Powered Extraction**: Uses Google Gemini AI to transcribe audio and extract structured data
- **Database Integration**: Automatically stores extracted records in Supabase
- **Data Export**: Download processed records as Excel files
- **Modern UI**: Clean, responsive interface built with Streamlit

## 🚀 Quick Start

### Prerequisites

- Python 3.8+
- Supabase account and project
- Google Gemini API key

### Installation

1. **Clone the repository**
   ```bash
   git clone <your-repo-url>
   cd Khidmat-PAWS-Shelter
   ```

2. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

3. **Set up environment variables**
   Create a `.env` file in the project root:
   ```bash
   SUPABASE_URL=https://your-project-ref.supabase.co
   SUPABASE_KEY=your-supabase-anon-key
   GOOGLE_API_KEY=your-gemini-api-key
   SUPABASE_SCHEMA=public
   ```

4. **Set up database**
   Run this SQL in your Supabase SQL Editor:
   ```sql
   create table if not exists public.veterinary_records (
     record_id bigint generated by default as identity primary key,
     patient_id integer not null,
     patient_name text not null,
     patient_dose text not null,
     notes text not null,
     record_date date not null,
     created_at timestamptz default now()
   );

   alter table public.veterinary_records enable row level security;

   create policy "allow select"
   on public.veterinary_records
   for select
   to anon, authenticated
   using (true);

   create policy "allow insert"
   on public.veterinary_records
   for insert
   to anon, authenticated
   with check (true);
   ```

5. **Run the application**
   ```bash
   streamlit run frontend.py
   ```

## 📊 Data Structure

The application extracts and stores the following information:

- **Patient ID**: Unique identifier for the patient
- **Patient Name**: Name of the animal patient
- **Patient Dose**: Medication and dosage information
- **Notes**: Additional instructions or observations for staff
- **Record Date**: Date when the record was created

## 🔧 Configuration

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `SUPABASE_URL` | Your Supabase project URL | Yes |
| `SUPABASE_KEY` | Your Supabase anon key | Yes |
| `GOOGLE_API_KEY` | Your Google Gemini API key | Yes |
| `SUPABASE_SCHEMA` | Database schema (default: public) | No |

### Supported Audio Formats

- MP3, WAV, M4A, OGG, FLAC, OPUS

## 🛡️ Security

- Environment variables are loaded from `.env` file (not committed to Git)
- Supabase Row Level Security (RLS) is enabled by default
- API keys are never exposed in the frontend code

## 📝 Usage

1. **Upload Audio Files**: Drag and drop or select audio files containing veterinary dictations
2. **Process Files**: Click "Process Audio Files" to extract information using AI
3. **Review Results**: Check the extracted data for accuracy
4. **Download**: Export results as Excel files for record keeping

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.

## 🆘 Support

If you encounter any issues:

1. Check that all environment variables are set correctly
2. Verify your Supabase table structure matches the expected schema
3. Ensure your API keys have the necessary permissions
4. Check the console for any error messages

## 🔄 Updates

- **v1.0.0**: Initial release with basic audio processing and database integration
